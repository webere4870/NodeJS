<script>

    const $ = (query) => document.querySelector(query)

    const getLikes = async (title) =>
    {
        console.log("here");
        let response = await fetch('/likes/' + title, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({title: title})
        })
        console.log(response);
        let {likes} = await response.json();
        let likeCount = $('#likeCount')
        let newText = document.createTextNode(likes);
        likeCount.appendChild(newText);
    }

    const getArticle = async (title) =>
    {
        let article = await fetch('/article');
    }

    const upLikes = async (title) =>
    {
        let iconDivs = document.querySelectorAll('.iconCircle');
        if(iconDivs[0].classList.contains("unliked"))
        {
            iconDivs[0].classList.toggle("unliked")
            iconDivs[0].classList.toggle("liked")
            iconDivs[0].querySelector('i').classList.toggle("likedI")
            let response = await fetch('/likes/' + title, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({title: title})
            })
            let {likes} = await response.json();
            let likeCount = $('#likeCount')
            let newText = document.createTextNode(likes);
            likeCount.textContent = "";
            likeCount.appendChild(newText);
        }
        else
        {
            iconDivs[0].classList.toggle("unliked")
            iconDivs[0].classList.toggle("liked")
            iconDivs[0].querySelector('i').classList.toggle("likedI")
            let response = await fetch('/downLikes/' + title, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({title: title})
            })
            let {likes} = await response.json();
            console.log(likes);
            let likeCount = $('#likeCount')
            let newText = document.createTextNode(likes);
            likeCount.textContent = "";
            likeCount.appendChild(newText);
        }
    }

    const loadComments = () =>
    {
        let myDiv = document.querySelectorAll('.colorMe')
        myDiv[0].classList.toggle("open");
    }

</script>