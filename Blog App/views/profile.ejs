<%- include('./navigation') %> 
<%- include('./logout') %> 

<div id="followers" style="display: none;" class="engagementCard hide">
    <div class="profileSubCard">
    <% if(typeof user.followers.length != 'undefined') {%> 
        <% for(let counter = 0; counter < user.followers.length; counter++) {%> 
            <% let iconIndex = 0; let valid = false; let i = 0;%> 
            <% for(let j = 0; j < followersHash.length; j++) {%>
                <% if(followersHash[j].username == user.followers[counter]) {
                    iconIndex = i;
               } %>
               <% i++%> 
            <% } %> 

            <% if(followersHash.length > 0) { %>
                
                <div class="rowFlex" style="margin: 10px 0;">
                <div class="profilePicture followPic" style="margin: 0 10px;">
                    <i class="<%=followersHash[iconIndex].icon%>"></i>
                </div><a href="/profile/<%= user.followers[counter]%>"><%= user.followers[counter]%></a>
                </div>   
           <% }%> 
        <%  }%> 
    <% } %> 
    </div>
    <div class="closeBtn" style="position: unset; margin-top: -380px; margin-left: 15px;" onclick="toggle('#followers')">
        <i class="far fa-times-circle" style="color: white;"></i>
    </div> 
</div>

<div id="following" style="display: none;" class="engagementCard hide">
    <div class="profileSubCard">
         
    <% if(typeof user.following.length != 'undefined') {%> 
        <% for(let counter = 0; counter < user.following.length; counter++) {%> 
            <% let iconIndex = 0; let valid = false; let i = 0;%> 
            <% for(let j = 0; j < followingHash.length; j++) {%>
                <% if(followingHash[j].username == user.following[counter]) {
                    iconIndex = i;
               } %>
               <% i++%> 
            <% } %> 

            <% if(followingHash.length > 0) { %>
                
                <div class="rowFlex" style="margin: 10px 0;">
                <div class="profilePicture followPic" style="margin: 0 10px;">
                    <i class="<%=followingHash[iconIndex].icon%>"></i>
                </div><a href="/profile/<%= user.following[counter]%>"><%= user.following[counter]%></a>
                </div>   
           <% }%>
        <%  }%> 
    <% } %> 
    </div>
    <div class="closeBtn" style="position: unset; margin-top: -380px; margin-left: 15px;" onclick="toggle('#following')">
        <i class="far fa-times-circle" style="color: white;"></i>
    </div> 
</div>
<div class="colFlex">
    <%- include('./profilepic') %> 
    <h1><%= user.first%> <%= user.last %></h1>
    <div class="rowFlex" style="margin-bottom: 20px;">
        <div>
            <p>Followers: <span class="aquaText hoverable" onclick="toggle('#followers')"><%= user.followers.length %> </span></p>
        </div>
        <div>
            <p>Following: <span class="aquaText hoverable" onclick="toggle('#following')"><%= user.followers.length %> </span></p>
        </div>
    </div>
    <%- include('./card') %> 
</div>